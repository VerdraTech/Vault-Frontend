
<ion-content [fullscreen]="true">
  <table style="width: 100%;">
    <thead>
      <tr>
        <th style="width: 17.5%" class="table-cell">Name</th>
        <th style="width: 10%" class="table-cell">Price</th>
        <th style="width: 12.5%" class="table-cell">Size</th>
        <th style="width: 12.5%" class="table-cell">SKU</th>
        <th style="width: 12.5%" class="table-cell">Date Purchased</th>
        <th style="width: 12.5%" class="table-cell">Date Sold</th>
        <th style="width: 12.5%" class="table-cell">Location</th>
        <th style="width: 10%" class="table-cell"></th>
      </tr>
    </thead>
    <tbody>
      @for (item of items; track $index; let i = $index) {
        <tr [ngClass]="item.length > 1 ? 'accordion' : ''">
          <td class="table-cell">
            @if (expanded[i] && item.length > 1) {
              <ion-icon name="chevron-down" class="chevron" (click)="toggle(i)"></ion-icon>
            } @else if (!expanded[i] && item.length > 1) {
              <ion-icon name="chevron-forward" class="chevron" (click)="toggle(i)"></ion-icon>
            }
            {{ item[0].name }}
          </td>
          <td class="table-cell" >
            <div >{{ item[0].price }}</div>
          </td>
          <td class="table-cell" >
            <div >{{ item[0].size }}</div>
          </td>
          <td class="table-cell" >
            <div >{{ item[0].sku }}</div>
          </td>
          <td class="table-cell" >
            <div >{{ item[0].datePurchased }}</div>
          </td>
          <td class="table-cell" >
            <div >{{ item[0].dateSold }}</div>
          </td>
          <td class="table-cell" >
            <div >{{ item[0].location }}</div>
          </td>
          <td class="table-cell"><ion-button expand="block" (click)="openModal(i, null, item[0])">Open</ion-button></td>
        </tr>
        @if (item.length > 1 && expanded[i]) {
          @for (product of item | slice:1; track $index; let h = $index; let last = $last ) {
            <tr class="accordion" [ngClass]="{'accordion-last-item': last}">
              <td class="table-cell">{{ product.name }}</td>
              <td class="table-cell">{{ product.price }}</td>
              <td class="table-cell">{{ product.size }}</td>
              <td class="table-cell">{{ product.sku }}</td>
              <td class="table-cell">{{ product.datePurchased }}</td>
              <td class="table-cell">{{ product.dateSold }}</td>
              <td class="table-cell">{{ product.location }}</td>
              <td class="table-cell"><ion-button expand="block" (click)="openModal(i, h, product)">Open</ion-button></td>
            </tr>
          }
        }
      } @empty {
        <p>There are no items</p>
      }
    </tbody>
  </table>
</ion-content>


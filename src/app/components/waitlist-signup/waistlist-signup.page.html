<ion-content class="waitlist-page">
  <!-- Header Section -->
  <div class="header-section" style="display: flex; justify-content: center">
    <ion-button
      fill="clear"
      class="back-button"
      routerLink="/landing"
      routerDirection="back"
    >
      <ion-icon name="arrow-back" slot="start"></ion-icon>
      Back
    </ion-button>
    <div class="header-content">
      <h1 class="page-title">Join the Waitlist</h1>
      <p class="page-subtitle">
        Be the first to know when Vault launches. Get early access and exclusive
        updates.
      </p>
    </div>
  </div>

  <!-- Signup Form Section -->
  <div class="form-section">
    <div class="form-container">
      <form
        [formGroup]="waitlistForm"
        (ngSubmit)="onSubmit()"
        class="waitlist-form"
      >
        <div class="form-header">
          <ion-icon name="mail" class="form-icon"></ion-icon>
          <h2>Get Early Access</h2>
          <p>Join our users waiting for Vault</p>
        </div>

        <div class="form-fields">
          <!-- Name Field -->
          <div
            style="
              margin-bottom: 1rem;
              background-color: #f8fafc;
              border-radius: 8px;
              padding: 0.5rem;
            "
          >
            <ion-label position="stacked" color="#131313">Name</ion-label>
            <ion-input
              type="text"
              formControlName="name"
              placeholder="Enter your full name"
              [class.ion-invalid]="isFieldInvalid('name')"
              [class.ion-touched]="waitlistForm.get('name')?.touched"
            >
            </ion-input>
            @if (isFieldInvalid('name')) {
            <div class="error-message">
              <ion-icon name="warning" size="small"></ion-icon>
              <span>Please enter your name</span>
            </div>
            }
          </div>

          <div
            style="
              margin-bottom: 1rem;
              background-color: #f8fafc;
              border-radius: 8px;
              padding: 0.5rem;
            "
          >
            <ion-label position="stacked" color="#131313"
              >Email Address</ion-label
            >
            <ion-input
              type="email"
              formControlName="email"
              placeholder="Enter your email address"
              [class.ion-invalid]="isFieldInvalid('email')"
              [class.ion-touched]="waitlistForm.get('email')?.touched"
            >
            </ion-input>
            @if (isFieldInvalid('email')) {
            <div class="error-message">
              <ion-icon name="warning" size="small"></ion-icon>
              @if (waitlistForm.get('email')?.errors?.['required']) {
              <span>Please enter your email address</span>
              } @if (waitlistForm.get('email')?.errors?.['email']) {
              <span>Please enter a valid email address</span>
              }
            </div>
            }
          </div>
        </div>

        <ion-button
          type="submit"
          class="submit-button"
          [disabled]="waitlistForm.invalid || isSubmitting"
          expand="block"
        >
          @if (isSubmitting) {
          <ion-spinner name="crescent" class="spinner"></ion-spinner>
          } @if (!isSubmitting) { Join Waitlist } @else { Joining... }
        </ion-button>

        @if (isSuccess) {
        <div class="success-message">
          <ion-icon name="checkmark-circle" class="success-icon"></ion-icon>
          <h3>You're on the list!</h3>
          <p>
            Thank you for joining our waitlist. We'll notify you as soon as
            Vault is ready.
          </p>
          <ion-button
            fill="outline"
            class="back-to-home"
            routerLink="/landing"
            routerDirection="root"
          >
            Back to Home
          </ion-button>
        </div>
        }
      </form>
    </div>
  </div>

  <!-- Benefits Section -->
  <div class="benefits-section">
    <h3>What you'll get:</h3>
    <div class="benefits-list">
      <div class="benefit-item">
        <ion-icon name="star" class="benefit-icon"></ion-icon>
        <span>Early access to Vault</span>
      </div>
      <div class="benefit-item">
        <ion-icon name="notifications" class="benefit-icon"></ion-icon>
        <span>Priority feature updates</span>
      </div>
      <div class="benefit-item">
        <ion-icon name="people" class="benefit-icon"></ion-icon>
        <span>Join our community</span>
      </div>
    </div>
  </div>
</ion-content>
